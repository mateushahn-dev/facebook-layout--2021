(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1895],{83249:function(t,e,n){"use strict";n.d(e,{F1:function(){return _},JW:function(){return N},RV:function(){return E},mv:function(){return Z}});var o,r,a=n(26042),i=n(69396),s=n(99534),c=n(29815),l=n(85893),u=n(82175),d=n(95799),f=n(58767),p=n(13979),v=n(67294),h=n(64529),x=n(8683),m=n(12797),g=n(92729),b=n.n(g),y=n(36779),j=n(29507),w=n(86010),C=n(64154),T=n(96486),k=n.n(T),S=[],N=(0,h.Ue)(function(t){return{toasts:S,addToast:k().throttle(function(e){t(function(t){return{toasts:(0,c.Z)(t.toasts).concat([(0,i.Z)((0,a.Z)({},e),{id:(0,p.Y)(10)}),])}})},1e3),closeToast:function(e){t(function(t){return{toasts:t.toasts.filter(function(t){return t.id!==e})}})},clearAllToasts:function(){t(function(){return{toasts:S}})}}}),Z=(o=function(t){return function(e){var n=N.getState().addToast;if("string"==typeof e)return n({header:e,type:t});n((0,i.Z)((0,a.Z)({},e),{type:t}))}},(r=function(t){return N.getState().addToast(t)}).error=o("error"),r.warning=o("warning"),r.info=o("info"),r.success=o("success"),r);function E(t){var e=N.getState();return e.toasts.forEach(function(n){return t?t(n)?e.closeToast(n.id):void 0:e.closeToast(n.id)})}var F=(0,y.L)("div",b().InnerToast);function _(){return(0,l.jsx)(O,{})}function O(){var t,e=function(t){var e=t.children,n=(0,s.Z)(t,["children"]);return(0,l.jsx)("button",(0,i.Z)((0,a.Z)({type:"button",className:"bg-[rgba(255,255,255,0.14)] hover:bg-[rgba(255,255,255,0.2)] border border-[rgba(255,255,255,0.12)] backdrop-blur-md float-right rounded-lg text-gray-5 px-2 py-1 mb-2 text-13",style:{filter:"drop-shadow(0px 0px 16px rgba(0, 0, 0, 0.36)) drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.36))"}},n),{children:e}))},n=N().toasts,o=null===(t=(0,j.Z)())||void 0===t?void 0:t.preferences,r=(0,v.useMemo)(function(){return n.filter(function(t){return!t.shouldShow||!o||t.shouldShow(o)})},[n,o]),c=r.filter(function(t){return"top"===t.position}),u=r.filter(function(t){return"top"!==t.position}),d=(0,v.useState)(!1),f=d[0],p=d[1];(0,v.useEffect)(function(){u.length||p(!1)},[u.length]);var h=N(function(t){return t.clearAllToasts}),m=(0,v.useState)(0),g=m[0],y=m[1],T=(0,v.useCallback)(function(t){null===t?y(0):y(t.clientHeight||0)},[]),k=(0,v.useCallback)(function(){var t;p(!1),null===(t=S.current)||void 0===t||t.scrollTo({top:0,behavior:"smooth"})},[]);(0,C.Z)("pai:canvas:movement",k);var S=(0,v.useRef)(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed top-[66px] right-4 z-[".concat(x.KN.TOASTS,"] space-y-2"),children:c.map(function(t){return(0,l.jsx)(A,{toast:t},t.id)})}),Boolean(u.length)&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:(0,w.Z)("fixed items-end bottom-0 right-0 left-0 pr-4 z-[".concat(x.KN.TOASTS,"] ").concat(f?"overflow-y-auto":"overflow-hidden"," flex flex-col transition-all duration-500"),b().ToastsScrollContainer),ref:S,style:{top:f?"66px":"calc(100vh - 36px - 16px - ".concat(g,"px)")},children:[(0,l.jsx)("div",{className:"flex-shrink h-full pointer-events-none"}),f?(0,l.jsx)("div",{className:"sticky top-0 right-0 z-[".concat(x.KN.TOASTS+1,"]"),children:(0,l.jsx)(e,{onClick:function(){return h()},children:"Clear all"})}):u.length>1?(0,l.jsx)("div",{children:(0,l.jsx)(e,{onClick:function(){return p(!0)},children:"Show all"})}):null,(0,l.jsx)("div",{className:"pb-2 space-y-2",children:u.reverse().map(function(t,e){return(0,l.jsx)(A,{callbackRef:0===e?T:void 0,toast:t},t.id)})})]})})]})}var L={error:"var(--pai-error-red)",warning:"var(--pai-warning-yellow)",info:"#43414A",success:"#43414A"},z={error:(0,l.jsx)(d.Z,{}),warning:(0,l.jsx)(f.Z,{color:"var(--pai-warning-yellow)"}),info:(0,l.jsx)(l.Fragment,{}),success:(0,l.jsx)(function(){return(0,l.jsx)(m.Z,{color:"#4EEBC6",size:24})},{})};function A(t){var e,n=t.toast,o=t.callbackRef,r=null!==(e=n.icon)&&void 0!==e?e:z[n.type],a=(0,v.useState)(!1),i=a[0],s=a[1],c=(0,v.useState)(!0),d=c[0],f=c[1],p=N(function(t){return t.closeToast}),h=(0,v.useCallback)(function(){s(!0),setTimeout(function(){p(n.id)},500)},[p,n.id]),x=n.cta?(0,l.jsx)(J,{label:n.cta.label,onClick:function(){var t;null===(t=n.cta)||void 0===t||t.onClick(),h()}}):null,m=(0,v.useMemo)(function(){var t;return!1===n.timeout?null:Date.now()+(null!==(t=n.timeout)&&void 0!==t?t:5e3)},[n.timeout]),g=(0,v.useState)(!1),b=g[0],y=g[1],j=(0,v.useState)(!1),w=j[0],C=j[1];(0,v.useEffect)(function(){setTimeout(function(){y(!0)},10)},[]),(0,v.useEffect)(function(){if(m){var t=setTimeout(function(){w||h()},m-Date.now());return function(){clearTimeout(t)}}},[w,m,n.id,h]);var T=(0,v.useState)(0),k=T[0],S=T[1],Z=(0,v.useCallback)(function(t){t&&(S(t.clientHeight),setTimeout(function(){return f(!1)},500)),null==o||o(t)},[o]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(F,{style:{borderColor:n.color||L[n.type],borderLeftWidth:"5px",width:n.width||void 0,marginBottom:"".concat(i?-k-8:0,"px"),transition:"margin-bottom 0.5s ease-in-out, transform 0.5s ease-in-out, opacity 0.5s ease-in-out"},className:"".concat(d?"absolute right-4":""," transition-all ").concat(n.body?"":"items-center"," flex ").concat(b&&!i?"":"translate-x-full opacity-0"),onMouseOver:function(){C(!0)},onMouseLeave:function(){C(!1)},ref:Z,"data-testid":"toast",children:[r,(0,l.jsxs)("div",{className:"flex justify-between w-full gap-x-2 ".concat(n.body?"flex-col":""),children:[(0,l.jsx)("header",{className:"text-gray-10 font-510 text-sm flex items-center",children:n.header}),n.body&&(0,l.jsxs)("div",{className:"flex ".concat("string"==typeof n.body&&n.body.length>90?"flex-col":""," items-end mt-1"),children:["string"==typeof n.body?(0,l.jsx)("p",{className:"text-gray-25 text-[13px] flex-grow",children:n.body}):(0,l.jsx)(l.Fragment,{children:n.body})," ",x]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[!n.body&&x,(0,l.jsx)("button",{className:"text-gray-50 cursor-pointer ".concat(n.body?"absolute right-1 top-1":""),onClick:function(){return h()},children:(0,l.jsx)(u.Z,{width:18})})]})]})]},n.id),d&&(0,l.jsx)("div",{style:{height:"".concat(k?k-8:0,"px"),transition:"height 0.5s ease-in-out"}})]})}function J(t){var e=t.label,n=t.onClick;return(0,l.jsx)("button",{className:"text-white font-590 text-sm flex-none",onClick:n,children:e})}},81895:function(t,e,n){"use strict";n.d(e,{fP:function(){return p},p1:function(){return v},zz:function(){return f}});var o=n(47568),r=n(20414),a=n(33219),i=n(90671),s=n(17616),c=n(83249),l=n(11163),u=n.n(l),d=n(34031);function f(t){c.mv.info({header:"Importing project file...",timeout:!1});var e=new FileReader;e.onload=function(e){var n,l=null===(n=e.target)||void 0===n?void 0:n.result;if("string"==typeof l){var f,p=(f=(0,o.Z)(function(e){var n,o,a,s;return(0,r.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch("/api/canvas/new",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({canvasFile:e,fileName:null!==(o=(0,d.rV)(t.name.split(".")[0]))&&void 0!==o?o:"Untitled"},i.P)})];case 1:return[4,r.sent().json()];case 2:return(null===(n=(s=r.sent()).canvas)||void 0===n?void 0:n.id)?(u().push("/canvas/".concat(s.canvas.id)),c.JW.setState({toasts:[]})):c.mv.error("Couldn't import project file"),[3,4];case 3:return r.sent(),c.mv.error("Couldn't import project file"),[3,4];case 4:return[2]}})}),function(t){return f.apply(this,arguments)});try{var v=JSON.parse(l,i.o);if(3===v.paiCanvasExportFormatVersion){p(v);return}if(2===v.paiCanvasExportFormatVersion){var h={paiCanvasExportFormatVersion:3,"pai-canvas-state":JSON.parse(v[a.tI],i.o).page,"pai-canvas-image-assets":JSON.parse(v[a.O6],i.o),projectName:"Untitled"};p(h);return}if(!v.paiCanvasExportFormatVersion){var x=(0,s.k)(v)||{},m={paiCanvasExportFormatVersion:3,"pai-canvas-state":v.page,"pai-canvas-image-assets":x,projectName:"Untitled"};p(m);return}}catch(g){console.error("Error importing canvas file",g),c.mv.error("Couldn't import project file")}}},e.readAsText(t)}function p(){var t=document.createElement("input");t.type="file",t.accept=a.YF.join(", "),t.style.display="none",t.onchange=function(t){var e,n=null===(e=t.target.files)||void 0===e?void 0:e[0];n&&f(n)},document.body.appendChild(t),t.click()}function v(t,e){var n=(0,d.xf)(e),o=document.createElement("a"),r=new Blob([JSON.stringify(t)],{type:"text/plain"});o.href=URL.createObjectURL(r),o.download=n,document.body.appendChild(o),o.click()}},12797:function(t,e,n){"use strict";n.d(e,{Z:function(){return s}});var o=n(26042),r=n(69396),a=n(99534),i=n(85893);function s(t){var e=t.size,n=void 0===e?24:e,s=t.color,c=void 0===s?"currentColor":s,l=(0,a.Z)(t,["size","color"]);return(0,i.jsxs)("svg",(0,r.Z)((0,o.Z)({width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l),{children:[(0,i.jsx)("path",{d:"M4.75 12C4.75 7.99594 7.99594 4.75 12 4.75C16.0041 4.75 19.25 7.99594 19.25 12C19.25 16.0041 16.0041 19.25 12 19.25C7.99594 19.25 4.75 16.0041 4.75 12Z",stroke:c,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M9.75 12.75L10.1837 13.6744C10.5275 14.407 11.5536 14.4492 11.9564 13.7473L14.25 9.75",stroke:c,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))}n(67294)},92729:function(t){t.exports={InnerToast:"Toast_InnerToast__uQJDC",ToastsScrollContainer:"Toast_ToastsScrollContainer___4osr"}}}]);